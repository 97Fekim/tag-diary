<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<th:block th:replace="~{/layout/basic :: setContent(~{this::content})}">
    <th:block th:fragment="content">

        <!-- Page Header-->
        <header class="masthead" style="padding-top: 5rem; padding-bottom: 5rem; background-image: url('/assets/img/beach.jpg')">
            <div class="container position-relative px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-md-10 col-lg-8 col-xl-7">

                    </div>
                </div>
            </div>
        </header>

        <!-- Page content-->
        <div class="container mt-5">
            <div class="row">
                <!-- Side widgets-->
                <div class="col-lg-4">
                    <!-- Categories widget-->
                    <div class="card mb-4">
                        <div class="card-header">태그1</div>
                        <div class="card-body">
                            <div class="row">
                                <div class="post-preview tag-container">

                                    <th:block th:each="tagDTO : ${tagDTOList}">
                                        <!-- Post preview-->

                                        <button draggable="true" class="tag-box" th:style="|background-color: ${tagDTO.color}|" th:text="${tagDTO.name}">
                                        </button>&nbsp;

                                    </th:block>

                                </div>
                            </div>
                        </div>
                        <div class="card-header">태그2</div>
                        <div class="card-body">
                            <div class="row">
                                <div class="post-preview tag-container">

                                    <th:block th:each="tagDTO : ${tagDTOList}">
                                        <!-- Post preview-->

                                        <button draggable="true" class="tag-box" th:style="|background-color: ${tagDTO.color}|" th:text="${tagDTO.name}">
                                        </button>&nbsp;

                                    </th:block>

                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Side widget-->
                    <div class="card mb-4">
                        <div class="card-header">Side Widget</div>
                        <div class="card-body">You can put anything you want inside of these side widgets. They are easy to use, and feature the Bootstrap 5 card component!</div>
                    </div>
                </div>

                <div class="col-lg-8">
                    <!-- Post content-->
                    <!--<article>
                        &lt;!&ndash; Post header&ndash;&gt;
                        <header class="mb-4">
                            &lt;!&ndash; Post title&ndash;&gt;
                            <h1 class="fw-bolder mb-1">Welcome to Blog Post!</h1>
                            &lt;!&ndash; Post meta content&ndash;&gt;
                            <div class="text-muted fst-italic mb-2">Posted on January 1, 2022 by Start Bootstrap</div>
                        </header>
                        &lt;!&ndash; Post content&ndash;&gt;
                        <section class="mb-5">
                            <p class="fs-5 mb-4">Science is an enterprise that should be cherished as an activity of the free human mind.</p>
                            </section>
                    </article>-->

                    <!-- Comments section-->
                    <section class="mb-5">
                            <div class="card-body">
                                <!-- Comment form-->
                                <form class="mb-4">
                                    <input class="form-control card-header tag-container diary" placeholder="제목을 입력하세요">
                                    <textarea class="form-control" rows="6" placeholder="태그를 추가한 후 내용을 입력하세요"></textarea>
                                </form>

                                <div id="temp" class="tag-container" style="margin: 10px; padding: 10px; border-radius: 8px">
                                    여기는 dropTag
                                </div>
                            </div>
                    </section>
                </div>
            </div>
        </div>

        <script>
            const draggables = document.querySelectorAll(".tag-box");
            const containers = document.querySelectorAll(".tag-container");

            draggables.forEach(draggable => {
                draggable.addEventListener("dragstart", () => {
                    draggable.classList.add("dragging");
                });

                draggable.addEventListener("dragend", () => {
                    draggable.classList.remove("dragging");
                    console.log("drop!!!")

                    let beAdded = document.createElement('textarea');

                    beAdded.setAttribute('row', 6);
                    beAdded.setAttribute('placeholder', '새로생김');

                    let beAddedBr = document.createElement('br');

                    console.log("drop!");

                    document.getElementById('temp').appendChild(beAdded);
                    document.getElementById('temp').appendChild(beAddedBr);
                });
            });

            containers.forEach(container => {
                container.addEventListener("dragover", e => {
                    e.preventDefault();
                    const draggable = document.querySelector(".dragging");
                    container.appendChild(draggable);

                });
            });

        </script>

    </th:block>
</th:block>